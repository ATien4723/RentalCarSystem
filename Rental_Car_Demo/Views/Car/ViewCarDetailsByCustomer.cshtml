@model Rental_Car_Demo.Models.Car

@using Newtonsoft.Json
@using Microsoft.AspNetCore.Http
@{
    ViewData["Title"] = "ViewCarDetailsByCustomer";
    var userString = Context.Session.GetString("User");
    User user = null;
    if (!string.IsNullOrEmpty(userString))
    {
        Layout = "_LayoutFeedBack";
        user = JsonConvert.DeserializeObject<User>(userString);
    }
    else
    {
        Layout = "_Layout";
    }
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rent Car Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
          integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.3/font/bootstrap-icons.min.css" rel="stylesheet">


    <link rel="stylesheet" data-purpose="Layout StyleSheet" title="Web Awesome"
          href="/css/app-wa-d53d10572a0e0d37cb8d614a3f177a0c.css?vsn=d">

    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/all.css">

    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-thin.css">

    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-solid.css">

    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-regular.css">

    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/sharp-light.css">



    <style>

        .card-title {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .location {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .looking {
            display: none;
        }

        body {
            background-color: #fff;
            font-family: Arial, sans-serif;
            color: #333;
        }

        .breadcrumb {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 15px;
        }

            .breadcrumb a {
                color: #888;
                text-decoration: none;
            }

                .breadcrumb a:hover {
                    text-decoration: underline;
                }

        .main-image {
            width: 100%;
            height: auto;
            border-radius: 10px;
        }

        .thumbnail-image {
            width: 100%;
            height: 100px;
            border-radius: 10px;
            margin-bottom: 10px;
            object-fit: cover;
        }

        .listing-header h1 {
            font-size: 1.8rem;
            font-weight: bold;
            margin-top: 10px;
        }

        .star-rating {
            color: #ffa500;
            font-size: 1rem;
        }

        .location {
            font-size: 1rem;
            margin-top: 5px;
            display: flex;
            align-items: center;
        }

            .location i {
                margin-right: 5px;
            }

        .car-info {
            display: flex;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .info-item {
            flex: 1 1 30%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin: 5px;
            font-size: 0.9rem;
            color: #555;
            text-align: center;
        }

            .info-item i {
                margin-right: 5px;
            }

        .price-section {
            text-align: center;
            margin-top: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

            .price-section h5 {
                font-size: 1.1rem;
                font-weight: bold;
                color: #333;
                margin-bottom: 10px;
                text-align: left;
            }

        .price {
            font-size: 1.8rem;
            font-weight: bold;
            color: #e60000;
            margin-top: 10px;
            border-bottom: 1px solid;
        }

        .contact-btn {
            width: 100%;
            font-size: 1rem;
        }

        .contact2-btn {
            width: 100%;
            font-size: 1rem;
            background-color: gray;
        }

        .description {
            font-size: 0.9rem;
            margin-top: 20px;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 10px;
            justify-content: space-between;
        }

        .main-column,
        .sidebar-column {
            display: flex;
            flex-direction: column;
        }

            .main-column img,
            .sidebar-column img {
                flex-grow: 1;
                object-fit: cover;
            }

        .icon {
            font-size: 1rem;
            margin-right: 5px;
        }

            .icon img {
                width: 20px;
                height: 20px;
                margin-right: 5px;
            }

        .owner-section h5 {
            font-size: 1.1rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .owner-info {
            display: flex;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 10px;
        }

        .owner-image {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }

        .owner-details {
            margin-left: 15px;
        }

        .owner-name {
            font-size: 1rem;
            font-weight: bold;
            color: #333;
        }

        .verification-badge {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            color: #28a745;
            margin-top: 5px;
        }

        .verified-icon {
            font-size: 1rem;
            margin-right: 5px;
        }

        .more-options {
            margin-left: auto;
            color: #888;
            cursor: pointer;
        }

            .more-options i {
                font-size: 1.2rem;
            }

        /* Customer Reviews Section */
        .reviews-section {
            margin-top: 20px;
        }

            .reviews-section h2 {
                font-size: 1.5rem;
                font-weight: bold;
                color: #333;
                margin-bottom: 15px;
            }

        .review {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .review-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

            .review-header img {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                object-fit: cover;
            }

            .review-header .reviewer-info {
                margin-left: 15px;
                flex-grow: 1;
            }

                .review-header .reviewer-info .reviewer-name {
                    font-size: 1rem;
                    font-weight: bold;
                    color: #333;
                }

                .review-header .reviewer-info .star-rating {
                    font-size: 1rem;
                    color: #ffa500;
                }

            .review-header .review-date {
                font-size: 0.9rem;
                color: #888;
            }

        .review-body {
            font-size: 0.9rem;
            color: #555;
        }

        .car-card {
            border: 1px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s ease;
            margin-bottom: 20px;
        }

            .car-card:hover {
                transform: scale(1.05);
            }

            .car-card img {
                width: 100%;
                height: 150px;
                object-fit: cover;
            }

            .car-card .card-body {
                padding: 15px;
            }

            .car-card .card-title {
                font-size: 1rem;
                font-weight: bold;
                color: #333;
                margin-bottom: 5px;
            }

        .star-rating {
            font-size: 0.9rem;
            color: #ffa500;
            margin-bottom: 5px;
        }

        .location {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 10px;
        }

        .car-infoo {
            font-size: 0.8rem;
            color: #555;
            margin-bottom: 10px;
        }

        .price {
            font-size: 1rem;
            font-weight: bold;
            color: #e60000;
            margin-bottom: 10px;
        }

        .btn-dark {
            width: 100%;
        }

        .tab-pane.active {
            display: flex;
        }

        .d-none {
            display: none;
        }

        .star {
            color: lightgray;
        }

        .filled {
            color: gold;
        }

        .half-filled {
            background: linear-gradient(90deg, gold 50%, lightgray 50%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

    </style>
</head>
<body>
    <div class="container mt-3">


        @if (user?.Role == false)
        {
            <a asp-controller="Users" asp-action="LoginCus" class="text">Home</a>
        }
        else if (user?.Role == true)
        {
            <a asp-controller="Users" asp-action="LoginOwn" class="text">Home</a>
        }
        else
        {
            <a asp-controller="Users" asp-action="Guest" class="text">Home</a>
        }
         <span>></span> <a asp-action="SearchCarForm" asp-controller="Home">Search Results</a> > <span>Car Details</span>
    </div>

    <div class="container mt-4">
        <div class="row">
            <div class="col-md-8 main-column">
                <img id="frontImg" src="~/img/@(ViewBag.car.FrontImage)" alt="Front img" class="main-image">
            </div>
            <div class="col-md-4 sidebar-column">
                <img id="backImg" src="~/img/@(ViewBag.car.BackImage)" alt="Back img" class="thumbnail-image">
                <img id="leftImg" src="~/img/@(ViewBag.car.LeftImage)" alt="Left img" class="thumbnail-image">
                <img id="rightImg" src="~/img/@(ViewBag.car.RightImage)" alt="Right img" class="thumbnail-image">
            </div>
        </div>

        <div class="listing-header col-4">
            <h1>@ViewBag.car.Name</h1>
            <div class="star-rating">
                <div class="row">
                    <label class="col-5 fw-bold text-black fs-5">Ratings:</label>
                    <label class="col-5 d-flex fs-4" id="rating">
                        <i class="bi bi-star-fill star ms-1"></i>
                        <i class="bi bi-star-fill star ms-1"></i>
                        <i class="bi bi-star-fill star ms-1"></i>
                        <i class="bi bi-star-fill star ms-1"></i>
                        <i class="bi bi-star-fill star ms-1"></i>
                    </label>
                    @if (ViewBag.Rating <= 0)
                    {
                        <label class="col-5"></label>
                        <span class="col-5 fw-bold">(No ratings yet)</span>
                    }
                </div>
            </div>
        </div>

        <div class="location mt-2" id="PreviewLocation">
            <i class="fas fa-map-marker-alt icon"></i> @ViewBag.district.DistrictName, @ViewBag.city.CityProvince
        </div>

        <!--Car Details-->
        <div class="mt-3">
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" href="#home" data-bs-target="#home">Basic Information</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#menu1" data-bs-target="#menu1">Details</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#menu2">Terms of use</a>
                </li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
                <div id="home" class="row mt-3 tab-pane active">
                    <div class="col-md-8 ">
                        <div class="car-info my-3 d-flex flex-wrap">
                            <div class="info-item">
                                <i class="fas fa-users"></i> @ViewBag.car.Seats
                            </div>
                            <div class="info-item">
                                <i class="fas fa-cogs"></i> @(ViewBag.car.TransmissionType == true ? "Automatic" : "Manual")
                            </div>
                            <div class="info-item">
                                <i class="fas fa-gas-pump"></i> @(ViewBag.car.FuelType == true ? "Gasoline" : "Diesel")
                            </div>
                            <div class="info-item">
                                <i class="fas fa-car"></i> @ViewBag.brand.BrandName
                            </div>
                            <div class="info-item">
                                <i class="fas fa-car-side"></i> @ViewBag.model.ModelName
                            </div>
                            <div class="info-item">
                                <i class="fa-sharp fa-regular fa-id-card"></i>@ViewBag.car.LicensePlate
                            </div>
                        </div>
                        <div class="row mt-4 fs-5">
                            <label class="col-auto fw-bold">Status:</label>
                            @if (@ViewBag.car.Status == 1)
                            {
                                <label class="col-auto fw-bold text-success">Available</label>
                            }
                            else if (@ViewBag.car.Status == 2)
                            {
                                <label class="col-auto fw-bold text-primary">Booked</label>
                            }
                            else
                            {
                                <label class="col-auto fw-bold text-danger">Stopped</label>
                            }
                        </div>
                        <div class="description mt-3">
                            <h5 style="font-weight: bold;">Description:</h5>
                            <p>
                                @ViewBag.car.Description
                            </p>
                        </div>

                        <div class="row mt-3" >
                            <label class="fw-bold" style="font-size:20px">Documents:</label>
                            <div class="col-5 mt-2">
                                <table class="table table-striped table-bordered">
                                    <thead>
                                        <tr>
                                            <th>No</th>
                                            <th>Name</th>
                                            <th>Note</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>Registration paper</td>
                                            @if (ViewBag.checkRent)
                                            {
                                                <td>
                                                    <a href="javascript:void(0);" onclick="showImageAndDownload('@Url.Content("~/img/" + ViewBag.document.Registration)', 'Registration_paper_@(ViewBag.car.Name)')">File1</a>
                                                </td>
                                            }
                                            else
                                            {
                                                <td>Verified</td>
                                            }
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>Certificate of Inspection</td>
                                            @if (ViewBag.checkRent)
                                            {
                                                <td>
                                                    <a href="javascript:void(0);" onclick="showImageAndDownload('@Url.Content("~/img/" + ViewBag.document.Certificate)', 'Certificate_@(ViewBag.car.Name)')">File2</a>
                                                </td>
                                            }
                                            else
                                            {
                                                <td>Verified</td>
                                            }
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>Insurance</td>
                                            @if (ViewBag.document.Insurance == null)
                                            {
                                                <td>Not available</td>
                                            }
                                            else if (!ViewBag.checkRent)
                                            {
                                                <td>Verified</td>
                                            }
                                            else if (ViewBag.checkRent)
                                            {
                                                <td>
                                                    <a href="javascript:void(0);" onclick="showImageAndDownload('@Url.Content("~/img/" + ViewBag.document.Insurance)', 'Insurance_@(ViewBag.car.Name)')">File3</a>
                                                </td>
                                            }
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <label class="text-danger">Note: Documents will be available for viewing after you've paid the deposit to rent.</label>
                        </div>

                        <div class=" reviews-section">
                            <h5 style="font-weight: bold;">Feedbacks of customers:</h5>

                            @if (ViewBag.matchedFeedback == null)
                            {
                                <div class="review-body">
                                    No feedback
                                </div>
                            }
                            else
                            {
                                int count = 0;
                                foreach (var f in ViewBag.matchedFeedback)
                                {
                                    if (count == 3)
                                    {
                                        break;
                                    }
                                    <div class="review" id="feedbackContainer">

                                        <div class="review-header">
                                            <img src="~/img/markzuck.jpg" alt="Reviewer Image">
                                            <div class="reviewer-info">
                                                <div class="reviewer-name">@f.Name</div>
                                                @if (@f.Ratings == 1)
                                                {
                                                    <div class="star-rating">★☆☆☆☆</div>
                                                }
                                                else if (@f.Ratings == 2)
                                                {
                                                    <div class="star-rating">★★☆☆☆</div>
                                                }
                                                else if (@f.Ratings == 3)
                                                {
                                                    <div class="star-rating">★★★☆☆</div>
                                                }
                                                else if (@f.Ratings == 4)
                                                {
                                                    <div class="star-rating">★★★★☆</div>
                                                }
                                                else if (@f.Ratings == 5)
                                                {
                                                    <div class="star-rating">★★★★★</div>
                                                }
                                            </div>
                                            <div class="review-date">@f.Date</div>
                                        </div>
                                        <div class="review-body">
                                            @f.Content
                                        </div>
                                    </div>


                                    count += 1;
                                }
                            }

                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="price-section text-center">
                            <h5>Car Rental Price</h5>
                            <div class="price" id="PreviewPrice"> @((ViewBag.car.BasePrice ).ToString("N0")) VND/day</div>

                            @if(ViewBag.car.Status == 1)
                            {
                                <a class="btn btn-danger contact-btn" asp-controller="Booking" asp-action="BookACar" asp-route-location="@ViewBag.location"
                                   asp-route-startDate="@ViewBag.startDate"
                                   asp-route-endDate="@ViewBag.endDate"
                                   asp-route-CarId="@ViewBag.car.CarId">
                                    Rent now
                                </a>
                            }
                            else
                            {
                                <a style="pointer-events: none;" class="btn btn-danger contact2-btn" asp-controller="Booking" asp-action="BookACar" asp-route-location="@ViewBag.location"
                                   asp-route-startDate="@ViewBag.startDate"
                                   asp-route-endDate="@ViewBag.endDate"
                                   asp-route-CarId="@ViewBag.car.CarId">
                                    Rent now
                                </a>
                            }
                        </div>
                        <div class="owner-section mt-4">
                            <h5>Car Owner</h5>
                            <div class="owner-info d-flex align-items-center">
                                <img src="~/img/5.png" alt="Owner Image" class="owner-image">
                                <div class="owner-details ml-3">
                                    <div class="owner-name">@ViewBag.CarOwner.Name </div>
                                    <div class="verification-badge">
                                        <span class="verified-icon">&#10003;</span> Verified
                                    </div>
                                    <div class="owner-name"><i class="fa-sharp fa-solid fa-phone-volume"></i>: @ViewBag.CarOwner.Phone</div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="container mt-4">
                        <h4 class="mb-4" style="font-weight: bold;">Rent more car</h4>
                        <div class="row">
                            @{
                                int cnt = 0;
                            }
                            @foreach (var c in ViewBag.CarsList)
                            {
                                if (cnt == 4)
                                {
                                    break;
                                }
                                <div class="col-md-3">
                                    <div class="card car-card">
                                        <img src="~/img/@c.FrontImage" class="card-img-top">
                                        <div class="card-body">
                                            <h5 class="card-title">@c.Name</h5>
                                            <div class="star-rating">
                                                ⭐ @if (c.AverageRating > 0)
                                                {
                                                    <span>@c.AverageRating.ToString("0.#")</span>
                                                } else
                                                {
                                                    <span>No ratings yet</span>
                                                } </div>
                                            <div class="location"> <i class="fa-solid fa-location-dot icon"></i>@c.Address.District.DistrictName, @c.Address.City.CityProvince</div>
                                            <div class="car-infoo">
                                                <div class="row">
                                                    <div class="col-6"><i class="fa-solid fa-person-seat icon"></i>@c.Seats chỗ</div>
                                                    <div class="col-6"> <i class="fa-solid fa-gas-pump icon"></i>@(c.FuelType == true ? "Gasoline" : "Diesel")</div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-6">
                                                        <i class="fa-sharp fa-solid fa-gears icon"></i>@(c.TransmissionType == true ? "Automatic" : "Manual")
                                                    </div>
                                                    <div class="col-6"><i class="fa-sharp fa-regular fa-calendar-days icon"></i>@c.ProductionYear</div>
                                                </div>
                                            </div>
                                            <div class="price">@((c.BasePrice ).ToString("N0")) VND/day</div>
                                            <a href="@Url.Action("ViewCarDetailsByCustomer","Car",new {CarId = c.CarId,location = ViewBag.location,startDate= ViewBag.startDate,endDate = ViewBag.endDate})" class="btn btn-dark">View more</a>
                                        </div>
                                    </div>
                                </div>
                                cnt += 1;
                            }


                        </div>
                    </div>

                </div>

                <div id="menu1" class="row container tab-pane fade">
                    <br>
                    <div class="row mt-3">
                        <label class="col-1 fw-bold">Mileage:</label>
                        <span class="col-2" style="margin-left:-2%">@ViewBag.car.Mileage</span>

                    </div>
                    <div class="row mt-3">
                        <label class="col-2 fw-bold">Fuel consumption:</label>
                        <span class="col-4" style="margin-left:-5%"> @ViewBag.car.FuelConsumption liter/100 km</span>
                    </div>
                    <div class="row mt-3">
                        <label class="col-1 fw-bold">Address:</label>
                        @if (ViewBag.checkRent)
                        {
                            <span class="col-10" style="margin-left:-2%">
                                @ViewBag.address.HouseNumberStreet,
                                @ViewBag.ward.WardName, @ViewBag.district.DistrictName, @ViewBag.city.CityProvince
                            </span>
                        }
                        else
                        {
                            <span class="col-10 fw-bold">
                            </span>
                        }
                        <span class="text-danger">Note: Full address will be available after you've  paid the deposit to rent.</span>
                    </div>

                    <div class="row mt-3">
                        <label class="fw-bold">Additional functions:</label><br />
                        <table class="col-md-2 bg-white ms-5 mt-3">
                            <tr class="row flex items-center">
                                <td class="flex items-center col-md-9">
                                    <i class="fa-brands fa-bluetooth-b"></i>
                                    Bluetooth
                                </td>
                                <td class="col-md-3">
                                    <input @(ViewBag.function.Bluetooth == true ? "checked" : "") disabled type="checkbox" name="Bluetooth" value="true" />
                                </td>
                            </tr>
                            <tr class="row flex items-center">
                                <td class="flex items-center col-md-9">
                                    <i class="fa-regular fa-map-location"></i>
                                    GPS
                                </td>
                                <td class="col-md-3">
                                    <input @(ViewBag.function.Gps == true ? "checked" : "") disabled type="checkbox" name="GPS" value="true" />
                                </td>
                            </tr>
                            <tr class="row flex items-center">
                                <td class="flex items-center col-md-9">
                                    <i class="fa-duotone fa-solid fa-camera-retro"></i>
                                    Camera
                                </td>
                                <td class="col-md-3">
                                    <input @(ViewBag.function.Camera == true ? "checked" : "") disabled type="checkbox" name="Camera" value="true" />
                                </td>
                            </tr>
                        </table>
                        <div class="col-md-2">
                        </div>
                        <table class="col-md-2 bg-white mt-3">
                            <tr class="row flex items-center">
                                <td class="flex items-center col-md-9">
                                    <i class="fa-solid fa-sun-bright"></i>
                                    Sunroof
                                </td>
                                <td class="col-md-3">
                                    <input @(ViewBag.function.SunRoof == true ? "checked" : "") disabled type="checkbox" name="Sunroof" value="true" />
                                </td>
                            </tr>
                            <tr class="row flex items-center">
                                <td class="flex items-center col-md-9">
                                    <i class="fa-sharp-duotone fa-solid fa-lock-keyhole"></i>
                                    Child lock
                                </td>
                                <td class="col-md-3">
                                    <input disabled type="checkbox" name="Childlock" value="true" @(ViewBag.function.ChildLock == true ? "checked" : "") />
                                </td>
                            </tr>
                            <tr class="row flex items-center">
                                <td class="flex items-center col-md-9">
                                    <i class="fa-sharp fa-solid fa-children"></i>
                                    Child seat
                                </td>
                                <td class="col-md-3">
                                    <input disabled type="checkbox" name="Childseat" value="true" @(ViewBag.function.ChildSeat == true ? "checked" : "") />
                                </td>
                            </tr>
                        </table>
                        <div class="col-md-2"></div>
                        <table class="col-md-2 bg-white mt-3">
                            <tr class="row flex items-center">
                                <td class="flex items-center col-md-9">
                                    <i class="fa-sharp fa-solid fa-disc-drive"></i>
                                    DVD
                                </td>
                                <td class="col-md-3">
                                    <input disabled type="checkbox" name="DVD" value="true" @(ViewBag.function.Dvd == true ? "checked" : "") />
                                </td>
                            </tr>
                            <tr class="row flex items-center">
                                <td class="flex items-center col-md-9">
                                    <i class="fa-duotone fa-solid fa-usb-drive"></i>
                                    USB
                                </td>
                                <td class="col-md-3">
                                    <input disabled type="checkbox" name="USB" value="true" @(ViewBag.function.Usb == true ? "checked" : "") />
                                </td>
                            </tr>
                        </table>
                        <div class="col-md-1"></div>
                    </div>
                </div>



                <div id="menu2" class="row container tab-pane fade">
                    <br>
                    <div class="mt-3">
                        <label asp-for="BasePrice" class=" col-2 fw-bold">Base price:</label>
                        <input asp-for="BasePrice" value="@(ViewBag.car.BasePrice.ToString("N0"))" disabled class="col-3" style="width:10%" />
                        <span class="fw-bold ms-2">VND/DAY</span>
                        <div>
                            <span asp-validation-for="BasePrice" id="checkBP" class="fw-bold text-danger"></span>
                        </div>
                    </div>

                    <div class="mt-3">
                        <label asp-for="Deposit" class="col-2 fw-bold">Required deposit:</label>
                        <input asp-for="Deposit" value="@(ViewBag.car.Deposit.ToString("N0"))" disabled class="col-3" required style=" width:10%" min="0" />
                        <span class="fw-bold ms-2">VND</span>
                    </div>
                    <div class="mt-5">
                        <label class="fw-bold">Term of use</label>
                        <div class="row mt-2">
                            <!-- First Row of Checkboxes -->
                            <div class="col-md-6 d-flex align-items-center">
                                <div class="form-check">
                                    <input disabled class="ms-2" type="checkbox" id="check1" name="smoking" value="true" @(ViewBag.term.NoSmoking == true ? "checked" : "") />
                                    <label class="ms-2" for="check1">No smoking</label>
                                </div>
                            </div>
                            <div class="col-md-6 d-flex align-items-center">
                                <div class="form-check" style="margin-left: -50%;">
                                    <input disabled class="ms-2" type="checkbox" id="check2" name="food" value="true" @(ViewBag.term.NoFoodInCar == true ? "checked" : "") />
                                    <label class=" ms-2" for="check2">No food in car</label>
                                </div>
                            </div>
                            <!-- Second Row of Checkboxes -->
                            <div class="col-md-6 d-flex align-items-center mt-3">
                                <div class="form-check">
                                    <input disabled class="ms-2" type="checkbox" id="check3" name="pet" value="true" @(ViewBag.term.NoPet == true ? "checked" : "") />
                                    <label class=" ms-2" for="check3">No pet</label>
                                </div>
                            </div>
                            <div class="col-md-6 d-flex align-items-start mt-3">
                                <div class="form-check" style="margin-left: -50%;">
                                    <input disabled class="ms-2" type="checkbox" id="check4" name="t4" value="Other" @(ViewBag.term.Specify != null ? "checked" : "") />
                                    <label class="ms-2" for="check4">Other</label>
                                </div>
                            </div>
                            <div class="col-md-6 d-flex align-items-start mt-3">
                                <div class="form-check">
                                </div>
                            </div>

                            <div class="col-md-6 d-flex align-items-start mt-3 @(ViewBag.term.Specify ==null?"d-none":"")">
                                <div class="form-check" style="margin-left: -50%;">
                                    <!-- Text field for Other -->
                                    <div id="otherTextField" class="ms-2">
                                        <textarea disabled name="specify" style="height: 120px;width: 300px;" class="form-control mt-2">@ViewBag.term.Specify</textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="imageModalLabel">File Preview</h5>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <img id="modalImage" src="" alt="Image" class="img-fluid">
                </div>
                <div class="modal-footer">
                    <a id="downloadLink" href="" download="" class="btn btn-primary">Download</a>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        function showImageAndDownload(imagePath, fileName) {
            document.getElementById('modalImage').src = imagePath;
            document.getElementById('downloadLink').href = imagePath;
            document.getElementById('downloadLink').download = fileName;
            $('#imageModal').modal('show');
        }
    </script>
    <script>
        function setRating(rating) {
            const stars = document.querySelectorAll('#rating .star');
            stars.forEach((star, index) => {
                star.classList.remove('filled', 'half-filled');
                if (rating >= index + 1) {
                    star.classList.add('filled');
                } else if (rating > index && rating < index + 1) {
                    star.classList.add('half-filled');
                }
            });
        }

        const ratingFromViewBag = parseFloat('@ViewBag.Rating'.replace(',', '.'));
        setRating(ratingFromViewBag);
    </script>

</body>
</html>
